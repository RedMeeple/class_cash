<div class="enter-behavior-container">

  <div class="enter-behavior-title">Behavior Entry for <%= Date.today %></div>

  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Well Behaved</th>
        <th>Completed Job</th>
      </tr>
    </thead>

    <tbody>
      <%= form_for @period, url: update_behavior_period_path(@period) do |period_form| %>
        <% @students.each do |student| %>
          <%= period_form.fields_for :students, student do |student_form| %>
            <%= student_form.fields_for :behaviors, (student.behaviors.find_by_date(Date.today) || student.behaviors.build) do |behavior_form| %>
              <tr>
              <%= behavior_form.hidden_field :date, value: Date.today %>
              <%= behavior_form.hidden_field :student_id, value: student.id %>
              <td><%= student.full_name %></td>
              <td><%= behavior_form.check_box :well_behaved, {:checked=>true} %></td>
              <% student.jobs.each do |job| %>
                <td><%= job.description %> <%= behavior_form.check_box :did_job, {:checked=>true} %></td>
              <%end %>
            <% end %></tr>
          <% end %>
        <% end %>
        <div class="actions">
          <%= period_form.submit "Submit" %>
        </div>
      <% end %>
    </tbody>
  </table>
